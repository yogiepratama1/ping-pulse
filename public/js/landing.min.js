const{createApp:createApp}=Vue;createApp({data:()=>({games:window.gamesData,selectedGame:null,showModal:!1,testing:!1,countdown:10,currentStatus:"",pings:[],result:null,waveHeights:Array(20).fill(0),waveInterval:null}),methods:{selectGame(t){this.selectedGame=t},async startTest(){if(!this.selectedGame)return;this.showModal=!0,this.testing=!0,this.countdown=10,this.pings=[],this.result=null,this.startWaveAnimation();const t=[`Fetching ${this.selectedGame.name} ${this.selectedGame.region} Server...`,"Sending Packets...","Analyzing Jitter...","Measuring Latency...","Calculating Average..."],e=setInterval(()=>{this.countdown--,this.currentStatus=t[Math.floor(Math.random()*t.length)],this.countdown<=0&&clearInterval(e)},1e3);try{const t=await fetch("/api/ping",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({url:this.selectedGame.url})}),e=await t.json();await new Promise(t=>setTimeout(t,Math.max(0,1e3*this.countdown))),this.pings=e.pings,this.result={average:e.average,grade:this.getGrade(e.average)},this.testing=!1,this.stopWaveAnimation()}catch(t){console.error("Ping test failed:",t),this.result={average:999,grade:this.getGrade(999)},this.testing=!1,this.stopWaveAnimation()}},startWaveAnimation(){this.waveInterval=setInterval(()=>{this.waveHeights=this.waveHeights.map(()=>100*Math.random()+20)},100)},stopWaveAnimation(){this.waveInterval&&(clearInterval(this.waveInterval),this.waveInterval=null)},getGrade:t=>t<30?{tier:"S-TIER",color:"#00FF00",emoji:"ðŸ”¥"}:t<50?{tier:"A-TIER",color:"#7FFF00",emoji:"âœ¨"}:t<80?{tier:"B-TIER",color:"#FFDE03",emoji:"ðŸ‘"}:t<120?{tier:"MEH",color:"#FFA500",emoji:"ðŸ˜"}:{tier:"LAGGY",color:"#FF0000",emoji:"ðŸ’€"},closeModal(){this.showModal=!1,this.testing=!1,this.result=null,this.stopWaveAnimation()}}}).mount("#app");